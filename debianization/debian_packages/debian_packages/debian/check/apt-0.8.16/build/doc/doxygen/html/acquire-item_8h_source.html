<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>apt: /home/rpmuser/debian/check/apt-0.8.16~exp12ubuntu10.16/apt-pkg/acquire-item.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">apt
   &#160;<span id="projectnumber">@VERSION@</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_c37ff385fd032239d555211fc694500a.html">apt-pkg</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">acquire-item.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="acquire-item_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// -*- mode: cpp; mode: fold -*-</span>
<a name="l00002"></a>00002 <span class="comment">// Description                                                          /*{{{*/</span>
<a name="l00003"></a>00003 <span class="comment">// $Id: acquire-item.h,v 1.26.2.3 2004/01/02 18:51:00 mdz Exp $</span>
<a name="l00004"></a>00004 <span class="comment">/* ######################################################################</span>
<a name="l00005"></a>00005 <span class="comment"></span>
<a name="l00006"></a>00006 <span class="comment">   Acquire Item - Item to acquire</span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment">   When an item is instantiated it will add it self to the local list in</span>
<a name="l00009"></a>00009 <span class="comment">   the Owner Acquire class. Derived classes will then call QueueURI to </span>
<a name="l00010"></a>00010 <span class="comment">   register all the URI&#39;s they wish to fetch at the initial moment.   </span>
<a name="l00011"></a>00011 <span class="comment">   </span>
<a name="l00012"></a>00012 <span class="comment">   Three item classes are provided to provide functionality for</span>
<a name="l00013"></a>00013 <span class="comment">   downloading of Index, Translation and Packages files.</span>
<a name="l00014"></a>00014 <span class="comment">   </span>
<a name="l00015"></a>00015 <span class="comment">   A Archive class is provided for downloading .deb files. It does Hash</span>
<a name="l00016"></a>00016 <span class="comment">   checking and source location as well as a retry algorithm.</span>
<a name="l00017"></a>00017 <span class="comment">   </span>
<a name="l00018"></a>00018 <span class="comment">   ##################################################################### */</span>
<a name="l00019"></a>00019                                                                         <span class="comment">/*}}}*/</span>
<a name="l00020"></a>00020 <span class="preprocessor">#ifndef PKGLIB_ACQUIRE_ITEM_H</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define PKGLIB_ACQUIRE_ITEM_H</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="acquire_8h.html">apt-pkg/acquire.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;apt-pkg/hashes.h&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;apt-pkg/weakptr.h&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="pkgcache_8h.html" title="pkgCache - Structure definitions for the cache file">apt-pkg/pkgcache.h</a>&gt;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#ifndef APT_8_CLEANER_HEADERS</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#include &lt;apt-pkg/indexfile.h&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;apt-pkg/vendor.h&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;apt-pkg/sourcelist.h&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;apt-pkg/pkgrecords.h&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;apt-pkg/indexrecords.h&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#endif</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span>
<a name="l00042"></a>00042 <span class="keyword">class </span><a class="code" href="classindexRecords.html">indexRecords</a>;
<a name="l00043"></a>00043 <span class="keyword">class </span><a class="code" href="classpkgRecords.html">pkgRecords</a>;
<a name="l00044"></a>00044 <span class="keyword">class </span><a class="code" href="classpkgSourceList.html">pkgSourceList</a>;
<a name="l00045"></a>00045 
<a name="l00058"></a><a class="code" href="classpkgAcquire_1_1Item.html">00058</a> <span class="keyword">class </span><a class="code" href="classpkgAcquire_1_1Item.html" title="Represents the process by which a pkgAcquire object should {{{ retrieve a file or a collection of fil...">pkgAcquire::Item</a> : <span class="keyword">public</span> <a class="code" href="classWeakPointable.html">WeakPointable</a>
<a name="l00059"></a>00059 {  
<a name="l00060"></a>00060    <span class="keyword">protected</span>:
<a name="l00061"></a>00061    
<a name="l00063"></a><a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10">00063</a>    <a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a> *<a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>;
<a name="l00064"></a>00064 
<a name="l00070"></a><a class="code" href="classpkgAcquire_1_1Item.html#ab455ec87a776308e2892d3a383b1c2d2">00070</a>    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcquire_1_1Item.html#ab455ec87a776308e2892d3a383b1c2d2" title="Insert this item into its owner&#39;s queue.">QueueURI</a>(<a class="code" href="structpkgAcquire_1_1ItemDesc.html" title="Represents a single download source from which an item should be downloaded.">ItemDesc</a> &amp;<a class="code" href="classpkgAcquire_1_1Item.html" title="Represents the process by which a pkgAcquire object should {{{ retrieve a file or a collection of fil...">Item</a>)
<a name="l00071"></a>00071                  {<a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>-&gt;<a class="code" href="classpkgAcquire.html#adff4865b0b932d7c8dae0aee44006c13" title="Insert the given fetch request into the appropriate queue.">Enqueue</a>(Item);};
<a name="l00072"></a>00072 
<a name="l00074"></a><a class="code" href="classpkgAcquire_1_1Item.html#a717924cd0aecc1908058a6ed7ffd31f3">00074</a>    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcquire_1_1Item.html#a717924cd0aecc1908058a6ed7ffd31f3" title="Remove this item from its owner&#39;s queue.">Dequeue</a>() {<a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>-&gt;<a class="code" href="classpkgAcquire.html#ad88e269d0297439604f25eb9c1309286" title="Remove all fetch requests for this item from all queues.">Dequeue</a>(<span class="keyword">this</span>);};
<a name="l00075"></a>00075    
<a name="l00085"></a>00085    <span class="keywordtype">void</span> <a class="code" href="classpkgAcquire_1_1Item.html#ae7cc109fe71557b04619356903267877" title="Rename a file without modifying its timestamp.">Rename</a>(std::string From,std::string To);
<a name="l00086"></a>00086    
<a name="l00087"></a>00087    <span class="keyword">public</span>:
<a name="l00088"></a>00088 
<a name="l00090"></a><a class="code" href="classpkgAcquire_1_1Item.html#abd4abbf0fe1f8b5299675b590315b4b9">00090</a>    <span class="keyword">enum</span> <a class="code" href="classpkgAcquire_1_1Item.html#abd4abbf0fe1f8b5299675b590315b4b9" title="The current status of this item.">ItemState</a>
<a name="l00091"></a>00091      {
<a name="l00093"></a><a class="code" href="classpkgAcquire_1_1Item.html#abd4abbf0fe1f8b5299675b590315b4b9aafe4203baf90d29ba26cdca204795329">00093</a>        <a class="code" href="classpkgAcquire_1_1Item.html#abd4abbf0fe1f8b5299675b590315b4b9aafe4203baf90d29ba26cdca204795329" title="The item is waiting to be downloaded.">StatIdle</a>,
<a name="l00094"></a>00094 
<a name="l00096"></a><a class="code" href="classpkgAcquire_1_1Item.html#abd4abbf0fe1f8b5299675b590315b4b9a2438768d0d80b2bcbf37ffa6bae5d445">00096</a>        <a class="code" href="classpkgAcquire_1_1Item.html#abd4abbf0fe1f8b5299675b590315b4b9a2438768d0d80b2bcbf37ffa6bae5d445" title="The item is currently being downloaded.">StatFetching</a>,
<a name="l00097"></a>00097 
<a name="l00099"></a><a class="code" href="classpkgAcquire_1_1Item.html#abd4abbf0fe1f8b5299675b590315b4b9a875850b5de48d7a0ae71c47fbbef4832">00099</a>        <a class="code" href="classpkgAcquire_1_1Item.html#abd4abbf0fe1f8b5299675b590315b4b9a875850b5de48d7a0ae71c47fbbef4832" title="The item has been successfully downloaded.">StatDone</a>,
<a name="l00100"></a>00100 
<a name="l00104"></a><a class="code" href="classpkgAcquire_1_1Item.html#abd4abbf0fe1f8b5299675b590315b4b9a8523989e15c68262bb5469f61fbe72ba">00104</a>        <a class="code" href="classpkgAcquire_1_1Item.html#abd4abbf0fe1f8b5299675b590315b4b9a8523989e15c68262bb5469f61fbe72ba" title="An error was encountered while downloading this item.">StatError</a>,
<a name="l00105"></a>00105 
<a name="l00109"></a><a class="code" href="classpkgAcquire_1_1Item.html#abd4abbf0fe1f8b5299675b590315b4b9a19728efb594f55c57218604ad77b25db">00109</a>        <a class="code" href="classpkgAcquire_1_1Item.html#abd4abbf0fe1f8b5299675b590315b4b9a19728efb594f55c57218604ad77b25db" title="The item was downloaded but its authenticity could not be verified.">StatAuthError</a>,
<a name="l00110"></a>00110 
<a name="l00114"></a><a class="code" href="classpkgAcquire_1_1Item.html#abd4abbf0fe1f8b5299675b590315b4b9a29a70e77eba9ee9773d3e6ac26348820">00114</a>        <a class="code" href="classpkgAcquire_1_1Item.html#abd4abbf0fe1f8b5299675b590315b4b9a29a70e77eba9ee9773d3e6ac26348820" title="The item was could not be downloaded because of a transient network error (e.g. network down)...">StatTransientNetworkError</a>
<a name="l00115"></a>00115      } Status;
<a name="l00116"></a>00116 
<a name="l00120"></a><a class="code" href="classpkgAcquire_1_1Item.html#ab2638de684977037618d65aa009384b1">00120</a>    std::string <a class="code" href="classpkgAcquire_1_1Item.html#ab2638de684977037618d65aa009384b1" title="Contains a textual description of the error encountered if #Status is StatError or StatAuthError...">ErrorText</a>;
<a name="l00121"></a>00121 
<a name="l00123"></a><a class="code" href="classpkgAcquire_1_1Item.html#a8798fd49b6306cde3810ff5744d8bfc2">00123</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="classpkgAcquire_1_1Item.html#a8798fd49b6306cde3810ff5744d8bfc2" title="The size of the object to fetch.">FileSize</a>;
<a name="l00124"></a>00124 
<a name="l00126"></a><a class="code" href="classpkgAcquire_1_1Item.html#a2b86900df4f7c4f7fc44f4c2bc888827">00126</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="classpkgAcquire_1_1Item.html#a2b86900df4f7c4f7fc44f4c2bc888827" title="How much of the object was already fetched.">PartialSize</a>;
<a name="l00127"></a>00127 
<a name="l00131"></a><a class="code" href="classpkgAcquire_1_1Item.html#a037fef483ec7b07ac1b31993b712de48">00131</a>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classpkgAcquire_1_1Item.html#a037fef483ec7b07ac1b31993b712de48" title="If not NULL, contains the name of a subprocess that is operating on this object (for instance...">Mode</a>;
<a name="l00132"></a>00132 
<a name="l00140"></a><a class="code" href="classpkgAcquire_1_1Item.html#a7fc877a36248a6101304994352d1ad87">00140</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="classpkgAcquire_1_1Item.html#a7fc877a36248a6101304994352d1ad87" title="A client-supplied unique identifier.">ID</a>;
<a name="l00141"></a>00141 
<a name="l00146"></a><a class="code" href="classpkgAcquire_1_1Item.html#a886f6c17d366793eb6202ba2482372f5">00146</a>    <span class="keywordtype">bool</span> <a class="code" href="classpkgAcquire_1_1Item.html#a886f6c17d366793eb6202ba2482372f5" title="If true, the entire object has been successfully fetched.">Complete</a>;
<a name="l00147"></a>00147 
<a name="l00153"></a><a class="code" href="classpkgAcquire_1_1Item.html#a98d3c89be817752144bb35823e365fec">00153</a>    <span class="keywordtype">bool</span> <a class="code" href="classpkgAcquire_1_1Item.html#a98d3c89be817752144bb35823e365fec" title="If true, the URI of this object is &quot;local&quot;.">Local</a>;
<a name="l00154"></a>00154    std::string UsedMirror;
<a name="l00155"></a>00155 
<a name="l00164"></a><a class="code" href="classpkgAcquire_1_1Item.html#a1d1d5538b9875279b01b81e1ef494601">00164</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classpkgAcquire_1_1Item.html#a1d1d5538b9875279b01b81e1ef494601" title="The number of fetch queues into which this item has been inserted.">QueueCounter</a>;
<a name="l00165"></a>00165    
<a name="l00169"></a><a class="code" href="classpkgAcquire_1_1Item.html#ab4b5e2afff64c51303682cea9243f098">00169</a>    std::string <a class="code" href="classpkgAcquire_1_1Item.html#ab4b5e2afff64c51303682cea9243f098" title="The name of the file into which the retrieved object will be written.">DestFile</a>;
<a name="l00170"></a>00170 
<a name="l00184"></a>00184    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcquire_1_1Item.html#ad7c33b8520f000b8dfdf48431ddf2949" title="Invoked by the acquire worker when the object couldn&#39;t be fetched.">Failed</a>(std::string Message,<a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00185"></a>00185 
<a name="l00205"></a>00205    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcquire_1_1Item.html#a688635545a65b9a4bebed86627574d41" title="Invoked by the acquire worker when the object was fetched successfully.">Done</a>(std::string Message,<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> Size,std::string Hash,
<a name="l00206"></a>00206                      <a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00207"></a>00207 
<a name="l00217"></a>00217    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcquire_1_1Item.html#aa2defeee26a310745909e456a14954ef" title="Invoked when the worker starts to fetch this object.">Start</a>(std::string Message,<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> Size);
<a name="l00218"></a>00218 
<a name="l00227"></a><a class="code" href="classpkgAcquire_1_1Item.html#acf5f0479651c9e527657e5a4e76a35f9">00227</a>    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcquire_1_1Item.html#acf5f0479651c9e527657e5a4e76a35f9" title="Custom headers to be sent to the fetch process.">Custom600Headers</a>() {<span class="keywordflow">return</span> std::string();};
<a name="l00228"></a>00228 
<a name="l00233"></a>00233    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcquire_1_1Item.html#a33630be55b62e4648f24c83378105c6f" title="A &quot;descriptive&quot; URI-like string.">DescURI</a>() = 0;
<a name="l00238"></a><a class="code" href="classpkgAcquire_1_1Item.html#a0fc996230e235126c070608a0e170fe5">00238</a>    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcquire_1_1Item.html#a0fc996230e235126c070608a0e170fe5" title="Short item description.">ShortDesc</a>() {<span class="keywordflow">return</span> <a class="code" href="classpkgAcquire_1_1Item.html#a33630be55b62e4648f24c83378105c6f" title="A &quot;descriptive&quot; URI-like string.">DescURI</a>();}
<a name="l00239"></a>00239 
<a name="l00241"></a><a class="code" href="classpkgAcquire_1_1Item.html#a2977f974805071d438df8dd73292fe72">00241</a>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcquire_1_1Item.html#a2977f974805071d438df8dd73292fe72" title="Invoked by the worker when the download is completely done.">Finished</a>() {};
<a name="l00242"></a>00242    
<a name="l00248"></a><a class="code" href="classpkgAcquire_1_1Item.html#a3547c3b8f6427183a8720ef931e5510d">00248</a>    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcquire_1_1Item.html#a3547c3b8f6427183a8720ef931e5510d" title="HashSum.">HashSum</a>() {<span class="keywordflow">return</span> std::string();};
<a name="l00249"></a>00249 
<a name="l00251"></a><a class="code" href="classpkgAcquire_1_1Item.html#a339a346401c534f8aaf10125f1d06228">00251</a>    <a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a> *<a class="code" href="classpkgAcquire_1_1Item.html#a339a346401c534f8aaf10125f1d06228">GetOwner</a>() {<span class="keywordflow">return</span> <a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>;};
<a name="l00252"></a>00252 
<a name="l00254"></a><a class="code" href="classpkgAcquire_1_1Item.html#a2edc43e22068002b21864bad8444d0f7">00254</a>    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classpkgAcquire_1_1Item.html#a2edc43e22068002b21864bad8444d0f7">IsTrusted</a>() {<span class="keywordflow">return</span> <span class="keyword">false</span>;};
<a name="l00255"></a>00255    
<a name="l00256"></a>00256    <span class="comment">// report mirror problems</span>
<a name="l00264"></a>00264 <span class="comment"></span>   <span class="keywordtype">void</span> <a class="code" href="classpkgAcquire_1_1Item.html#a239c465dd134d912a3926d44fe3552f1" title="Report mirror problem.">ReportMirrorFailure</a>(std::string FailCode);
<a name="l00265"></a>00265 
<a name="l00266"></a>00266 
<a name="l00278"></a>00278    <a class="code" href="classpkgAcquire_1_1Item.html#ab67e36773d41f42609709959446c9b9b" title="Initialize an item.">Item</a>(<a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a> *<a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>);
<a name="l00279"></a>00279 
<a name="l00283"></a>00283    <span class="keyword">virtual</span> <a class="code" href="classpkgAcquire_1_1Item.html#a85bc7807ee78093afc1904df470b2b79" title="Remove this item from its owner&#39;s queue by invoking pkgAcquire::Remove.">~Item</a>();
<a name="l00284"></a>00284 };
<a name="l00285"></a>00285                                                                         <span class="comment">/*}}}*/</span>         <span class="comment">/*{{{*/</span>
<a name="l00287"></a><a class="code" href="structDiffInfo.html">00287</a> <span class="keyword">struct </span><a class="code" href="structDiffInfo.html" title="Information about an index patch (aka diff).">DiffInfo</a> {
<a name="l00289"></a><a class="code" href="structDiffInfo.html#aefc35c7944eed319c89bc1b399f0eb67">00289</a>    std::string <a class="code" href="structDiffInfo.html#aefc35c7944eed319c89bc1b399f0eb67">file</a>;
<a name="l00290"></a>00290 
<a name="l00292"></a><a class="code" href="structDiffInfo.html#afec3c3f7721f07dd59393b9bfff9e1dd">00292</a>    std::string <a class="code" href="structDiffInfo.html#afec3c3f7721f07dd59393b9bfff9e1dd">sha1</a>;
<a name="l00293"></a>00293 
<a name="l00295"></a><a class="code" href="structDiffInfo.html#a1e1268d164c38e4f8a4f4eb9058b0601">00295</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structDiffInfo.html#a1e1268d164c38e4f8a4f4eb9058b0601">size</a>;
<a name="l00296"></a>00296 };
<a name="l00297"></a>00297                                                                         <span class="comment">/*}}}*/</span>
<a name="l00304"></a><a class="code" href="classpkgAcqSubIndex.html">00304</a> <span class="keyword">class </span><a class="code" href="classpkgAcqSubIndex.html" title="An item that is responsible for fetching a SubIndex {{{.">pkgAcqSubIndex</a> : <span class="keyword">public</span> <a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a>::<a class="code" href="classpkgAcquire_1_1Item.html#ab67e36773d41f42609709959446c9b9b" title="Initialize an item.">Item</a>
<a name="l00305"></a>00305 {
<a name="l00306"></a>00306  <span class="keyword">protected</span>:
<a name="l00308"></a><a class="code" href="classpkgAcqSubIndex.html#acdf3472c9b75f32dae88032d42d1cb6c">00308</a>    <span class="keywordtype">bool</span> <a class="code" href="classpkgAcqSubIndex.html#acdf3472c9b75f32dae88032d42d1cb6c" title="If true, debugging information will be written to std::clog.">Debug</a>;
<a name="l00309"></a>00309 
<a name="l00311"></a><a class="code" href="classpkgAcqSubIndex.html#a63a8c90526aa28ea8a9c2458a53846bc">00311</a>    <a class="code" href="structpkgAcquire_1_1ItemDesc.html" title="Represents a single download source from which an item should be downloaded.">pkgAcquire::ItemDesc</a> <a class="code" href="classpkgAcqSubIndex.html#a63a8c90526aa28ea8a9c2458a53846bc" title="The item that is currently being downloaded.">Desc</a>;
<a name="l00312"></a>00312 
<a name="l00315"></a><a class="code" href="classpkgAcqSubIndex.html#a30ce4163915317207b0c3ce437725e07">00315</a>    <a class="code" href="classHashString.html">HashString</a> <a class="code" href="classpkgAcqSubIndex.html#a30ce4163915317207b0c3ce437725e07" title="The Hash that this file should have after download.">ExpectedHash</a>;
<a name="l00316"></a>00316 
<a name="l00317"></a>00317  <span class="keyword">public</span>:
<a name="l00318"></a>00318    <span class="comment">// Specialized action members</span>
<a name="l00319"></a>00319    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqSubIndex.html#ad7c33b8520f000b8dfdf48431ddf2949" title="Invoked by the acquire worker when the object couldn&#39;t be fetched.">Failed</a>(std::string Message,<a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00320"></a>00320    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqSubIndex.html#aa3ae904a406da88bc67dd2e9e556dffa" title="Invoked by the acquire worker when the object was fetched successfully.">Done</a>(std::string Message,<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> Size,std::string Md5Hash,
<a name="l00321"></a>00321                      <a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00322"></a><a class="code" href="classpkgAcqSubIndex.html#a853c32904fff75b1a5d2c68441f41cad">00322</a>    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqSubIndex.html#a853c32904fff75b1a5d2c68441f41cad" title="A &quot;descriptive&quot; URI-like string.">DescURI</a>() {<span class="keywordflow">return</span> <a class="code" href="classpkgAcqSubIndex.html#a63a8c90526aa28ea8a9c2458a53846bc" title="The item that is currently being downloaded.">Desc</a>.<a class="code" href="structpkgAcquire_1_1ItemDesc.html#aaf8eea5037c53d12d3f31ab9e032712c" title="The URI from which to download this item.">URI</a>;};
<a name="l00323"></a>00323    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqSubIndex.html#a00fc58f7709000dd60501e4d9034b7b0" title="Custom headers to be sent to the fetch process.">Custom600Headers</a>();
<a name="l00324"></a>00324    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> ParseIndex(std::string <span class="keyword">const</span> &amp;IndexFile);
<a name="l00325"></a>00325 
<a name="l00338"></a>00338    <a class="code" href="classpkgAcqSubIndex.html#a0e09247c4005b26fab7f8b5c91baeb49" title="Create a new pkgAcqSubIndex.">pkgAcqSubIndex</a>(<a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a> *<a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>, std::string <span class="keyword">const</span> &amp;<a class="code" href="classURI.html">URI</a>,std::string <span class="keyword">const</span> &amp;URIDesc,
<a name="l00339"></a>00339                    std::string <span class="keyword">const</span> &amp;<a class="code" href="classpkgAcquire_1_1Item.html#a0fc996230e235126c070608a0e170fe5" title="Short item description.">ShortDesc</a>, <a class="code" href="classHashString.html">HashString</a> <span class="keyword">const</span> &amp;<a class="code" href="classpkgAcqSubIndex.html#a30ce4163915317207b0c3ce437725e07" title="The Hash that this file should have after download.">ExpectedHash</a>);
<a name="l00340"></a>00340 };
<a name="l00341"></a>00341                                                                         <span class="comment">/*}}}*/</span>
<a name="l00351"></a><a class="code" href="classpkgAcqDiffIndex.html">00351</a> <span class="keyword">class </span><a class="code" href="classpkgAcqDiffIndex.html" title="An item that is responsible for fetching an index file of {{{ package list diffs and starting the pac...">pkgAcqDiffIndex</a> : <span class="keyword">public</span> <a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a>::<a class="code" href="classpkgAcquire_1_1Item.html#ab67e36773d41f42609709959446c9b9b" title="Initialize an item.">Item</a>
<a name="l00352"></a>00352 {
<a name="l00353"></a>00353  <span class="keyword">protected</span>:
<a name="l00355"></a><a class="code" href="classpkgAcqDiffIndex.html#acdf3472c9b75f32dae88032d42d1cb6c">00355</a>    <span class="keywordtype">bool</span> <a class="code" href="classpkgAcqDiffIndex.html#acdf3472c9b75f32dae88032d42d1cb6c" title="If true, debugging information will be written to std::clog.">Debug</a>;
<a name="l00356"></a>00356 
<a name="l00358"></a><a class="code" href="classpkgAcqDiffIndex.html#a63a8c90526aa28ea8a9c2458a53846bc">00358</a>    <a class="code" href="structpkgAcquire_1_1ItemDesc.html" title="Represents a single download source from which an item should be downloaded.">pkgAcquire::ItemDesc</a> <a class="code" href="classpkgAcqDiffIndex.html#a63a8c90526aa28ea8a9c2458a53846bc" title="The item that is currently being downloaded.">Desc</a>;
<a name="l00359"></a>00359 
<a name="l00363"></a><a class="code" href="classpkgAcqDiffIndex.html#a60820e30470dce6f22aa8ced3fd96628">00363</a>    std::string <a class="code" href="classpkgAcqDiffIndex.html#a60820e30470dce6f22aa8ced3fd96628" title="The URI of the index file to recreate at our end (either by downloading it or by applying partial pat...">RealURI</a>;
<a name="l00364"></a>00364 
<a name="l00368"></a><a class="code" href="classpkgAcqDiffIndex.html#a30ce4163915317207b0c3ce437725e07">00368</a>    <a class="code" href="classHashString.html">HashString</a> <a class="code" href="classpkgAcqDiffIndex.html#a30ce4163915317207b0c3ce437725e07" title="The Hash that the real index file should have after all patches have been applied.">ExpectedHash</a>;
<a name="l00369"></a>00369 
<a name="l00373"></a><a class="code" href="classpkgAcqDiffIndex.html#ab639fc485aadce5a2c917cf608985f30">00373</a>    std::string <a class="code" href="classpkgAcqDiffIndex.html#ab639fc485aadce5a2c917cf608985f30" title="The index file which will be patched to generate the new file.">CurrentPackagesFile</a>;
<a name="l00374"></a>00374 
<a name="l00378"></a><a class="code" href="classpkgAcqDiffIndex.html#a72a1a381861908396ddca53a1fa28f97">00378</a>    std::string <a class="code" href="classpkgAcqDiffIndex.html#a72a1a381861908396ddca53a1fa28f97" title="A description of the Packages file (stored in pkgAcquire::ItemDesc::Description).">Description</a>;
<a name="l00379"></a>00379 
<a name="l00380"></a>00380  <span class="keyword">public</span>:
<a name="l00381"></a>00381    <span class="comment">// Specialized action members</span>
<a name="l00382"></a>00382    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqDiffIndex.html#ad7c33b8520f000b8dfdf48431ddf2949" title="Invoked by the acquire worker when the object couldn&#39;t be fetched.">Failed</a>(std::string Message,<a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00383"></a>00383    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqDiffIndex.html#aa3ae904a406da88bc67dd2e9e556dffa" title="Invoked by the acquire worker when the object was fetched successfully.">Done</a>(std::string Message,<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> Size,std::string Md5Hash,
<a name="l00384"></a>00384                      <a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00385"></a><a class="code" href="classpkgAcqDiffIndex.html#a853c32904fff75b1a5d2c68441f41cad">00385</a>    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqDiffIndex.html#a853c32904fff75b1a5d2c68441f41cad" title="A &quot;descriptive&quot; URI-like string.">DescURI</a>() {<span class="keywordflow">return</span> <a class="code" href="classpkgAcqDiffIndex.html#a60820e30470dce6f22aa8ced3fd96628" title="The URI of the index file to recreate at our end (either by downloading it or by applying partial pat...">RealURI</a> + <span class="stringliteral">&quot;Index&quot;</span>;};
<a name="l00386"></a>00386    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqDiffIndex.html#a00fc58f7709000dd60501e4d9034b7b0" title="Custom headers to be sent to the fetch process.">Custom600Headers</a>();
<a name="l00387"></a>00387 
<a name="l00398"></a>00398    <span class="keywordtype">bool</span> <a class="code" href="classpkgAcqDiffIndex.html#ab02d01ebaba557d7c3a08f099b9607cc" title="Parse the Index file for a set of Packages diffs.">ParseDiffIndex</a>(std::string IndexDiffFile);
<a name="l00399"></a>00399    
<a name="l00400"></a>00400 
<a name="l00413"></a>00413    <a class="code" href="classpkgAcqDiffIndex.html#a843be65e3422389b1dc147a3bfeda284" title="Create a new pkgAcqDiffIndex.">pkgAcqDiffIndex</a>(<a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a> *<a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>,std::string <a class="code" href="classURI.html">URI</a>,std::string URIDesc,
<a name="l00414"></a>00414                    std::string <a class="code" href="classpkgAcquire_1_1Item.html#a0fc996230e235126c070608a0e170fe5" title="Short item description.">ShortDesc</a>, <a class="code" href="classHashString.html">HashString</a> <a class="code" href="classpkgAcqDiffIndex.html#a30ce4163915317207b0c3ce437725e07" title="The Hash that the real index file should have after all patches have been applied.">ExpectedHash</a>);
<a name="l00415"></a>00415 };
<a name="l00416"></a>00416                                                                         <span class="comment">/*}}}*/</span>
<a name="l00428"></a><a class="code" href="classpkgAcqIndexDiffs.html">00428</a> <span class="keyword">class </span><a class="code" href="classpkgAcqIndexDiffs.html" title="An item that is responsible for fetching all the patches {{{ that need to be applied to a given packa...">pkgAcqIndexDiffs</a> : <span class="keyword">public</span> <a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a>::<a class="code" href="classpkgAcquire_1_1Item.html#ab67e36773d41f42609709959446c9b9b" title="Initialize an item.">Item</a>
<a name="l00429"></a>00429 {
<a name="l00430"></a>00430    <span class="keyword">private</span>:
<a name="l00431"></a>00431 
<a name="l00441"></a>00441    <span class="keywordtype">bool</span> QueueNextDiff();
<a name="l00442"></a>00442 
<a name="l00454"></a>00454    <span class="keywordtype">void</span> Finish(<span class="keywordtype">bool</span> allDone=<span class="keyword">false</span>);
<a name="l00455"></a>00455 
<a name="l00456"></a>00456    <span class="keyword">protected</span>:
<a name="l00457"></a>00457 
<a name="l00461"></a><a class="code" href="classpkgAcqIndexDiffs.html#acdf3472c9b75f32dae88032d42d1cb6c">00461</a>    <span class="keywordtype">bool</span> <a class="code" href="classpkgAcqIndexDiffs.html#acdf3472c9b75f32dae88032d42d1cb6c" title="If true, debugging output will be written to std::clog.">Debug</a>;
<a name="l00462"></a>00462 
<a name="l00466"></a><a class="code" href="classpkgAcqIndexDiffs.html#a63a8c90526aa28ea8a9c2458a53846bc">00466</a>    <a class="code" href="structpkgAcquire_1_1ItemDesc.html" title="Represents a single download source from which an item should be downloaded.">pkgAcquire::ItemDesc</a> <a class="code" href="classpkgAcqIndexDiffs.html#a63a8c90526aa28ea8a9c2458a53846bc" title="A description of the item that is currently being downloaded.">Desc</a>;
<a name="l00467"></a>00467 
<a name="l00471"></a><a class="code" href="classpkgAcqIndexDiffs.html#a60820e30470dce6f22aa8ced3fd96628">00471</a>    std::string <a class="code" href="classpkgAcqIndexDiffs.html#a60820e30470dce6f22aa8ced3fd96628" title="The URI of the package index file that is being reconstructed.">RealURI</a>;
<a name="l00472"></a>00472 
<a name="l00476"></a><a class="code" href="classpkgAcqIndexDiffs.html#a30ce4163915317207b0c3ce437725e07">00476</a>    <a class="code" href="classHashString.html">HashString</a> <a class="code" href="classpkgAcqIndexDiffs.html#a30ce4163915317207b0c3ce437725e07" title="The HashSum of the package index file that is being reconstructed.">ExpectedHash</a>;
<a name="l00477"></a>00477 
<a name="l00479"></a><a class="code" href="classpkgAcqIndexDiffs.html#a72a1a381861908396ddca53a1fa28f97">00479</a>    std::string <a class="code" href="classpkgAcqIndexDiffs.html#a72a1a381861908396ddca53a1fa28f97">Description</a>;
<a name="l00480"></a>00480 
<a name="l00489"></a><a class="code" href="classpkgAcqIndexDiffs.html#a6822b4355d68d4683938302c3c4bee8b">00489</a>    std::vector&lt;DiffInfo&gt; <a class="code" href="classpkgAcqIndexDiffs.html#a6822b4355d68d4683938302c3c4bee8b">available_patches</a>;
<a name="l00490"></a>00490 
<a name="l00492"></a><a class="code" href="classpkgAcqIndexDiffs.html#aa21f20c0300cbd25b4b4a51802f5ad80">00492</a>    std::string <a class="code" href="classpkgAcqIndexDiffs.html#aa21f20c0300cbd25b4b4a51802f5ad80">ServerSha1</a>;
<a name="l00493"></a>00493 
<a name="l00495"></a><a class="code" href="classpkgAcqIndexDiffs.html#ab2898413cf073f60c8ea280c811c3edf">00495</a>    <span class="keyword">enum</span> <a class="code" href="classpkgAcqIndexDiffs.html#ab2898413cf073f60c8ea280c811c3edf">DiffState</a>
<a name="l00496"></a>00496      {
<a name="l00498"></a><a class="code" href="classpkgAcqIndexDiffs.html#ab2898413cf073f60c8ea280c811c3edfa82b287c62411f8b692402f8df1e68cc8">00498</a>          <a class="code" href="classpkgAcqIndexDiffs.html#ab2898413cf073f60c8ea280c811c3edfa82b287c62411f8b692402f8df1e68cc8" title="The diff is in an unknown state.">StateFetchUnkown</a>,
<a name="l00499"></a>00499 
<a name="l00501"></a><a class="code" href="classpkgAcqIndexDiffs.html#ab2898413cf073f60c8ea280c811c3edfaec3dbb53054bff15ce3c49882de26f84">00501</a>          <a class="code" href="classpkgAcqIndexDiffs.html#ab2898413cf073f60c8ea280c811c3edfaec3dbb53054bff15ce3c49882de26f84" title="The diff is currently being fetched.">StateFetchDiff</a>,
<a name="l00502"></a>00502          
<a name="l00504"></a><a class="code" href="classpkgAcqIndexDiffs.html#ab2898413cf073f60c8ea280c811c3edfa41b47b46b061b0d7b111045af4f2e727">00504</a>          <a class="code" href="classpkgAcqIndexDiffs.html#ab2898413cf073f60c8ea280c811c3edfa41b47b46b061b0d7b111045af4f2e727" title="The diff is currently being uncompressed.">StateUnzipDiff</a>, <span class="comment">// FIXME: No longer used</span>
<a name="l00505"></a>00505 
<a name="l00507"></a><a class="code" href="classpkgAcqIndexDiffs.html#ab2898413cf073f60c8ea280c811c3edfa85e95bc535755d0bcc1421d7daa90f0e">00507</a>          <a class="code" href="classpkgAcqIndexDiffs.html#ab2898413cf073f60c8ea280c811c3edfa85e95bc535755d0bcc1421d7daa90f0e" title="The diff is currently being applied.">StateApplyDiff</a>
<a name="l00508"></a>00508    } State;
<a name="l00509"></a>00509 
<a name="l00510"></a>00510    <span class="keyword">public</span>:
<a name="l00511"></a>00511    
<a name="l00517"></a>00517    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqIndexDiffs.html#ad7c33b8520f000b8dfdf48431ddf2949" title="Called when the patch file failed to be downloaded.">Failed</a>(std::string Message,<a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00518"></a>00518 
<a name="l00519"></a>00519    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqIndexDiffs.html#aa3ae904a406da88bc67dd2e9e556dffa" title="Invoked by the acquire worker when the object was fetched successfully.">Done</a>(std::string Message,<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> Size,std::string Md5Hash,
<a name="l00520"></a>00520                      <a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00521"></a><a class="code" href="classpkgAcqIndexDiffs.html#a853c32904fff75b1a5d2c68441f41cad">00521</a>    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqIndexDiffs.html#a853c32904fff75b1a5d2c68441f41cad" title="A &quot;descriptive&quot; URI-like string.">DescURI</a>() {<span class="keywordflow">return</span> <a class="code" href="classpkgAcqIndexDiffs.html#a60820e30470dce6f22aa8ced3fd96628" title="The URI of the package index file that is being reconstructed.">RealURI</a> + <span class="stringliteral">&quot;Index&quot;</span>;};
<a name="l00522"></a>00522 
<a name="l00545"></a>00545    <a class="code" href="classpkgAcqIndexDiffs.html#a399edc6f336ab0cd08ce630e49e8a95f" title="Create an index diff item.">pkgAcqIndexDiffs</a>(<a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a> *<a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>,std::string <a class="code" href="classURI.html">URI</a>,std::string URIDesc,
<a name="l00546"></a>00546                     std::string <a class="code" href="classpkgAcquire_1_1Item.html#a0fc996230e235126c070608a0e170fe5" title="Short item description.">ShortDesc</a>, <a class="code" href="classHashString.html">HashString</a> <a class="code" href="classpkgAcqIndexDiffs.html#a30ce4163915317207b0c3ce437725e07" title="The HashSum of the package index file that is being reconstructed.">ExpectedHash</a>,
<a name="l00547"></a>00547                     std::string <a class="code" href="classpkgAcqIndexDiffs.html#aa21f20c0300cbd25b4b4a51802f5ad80">ServerSha1</a>,
<a name="l00548"></a>00548                     std::vector&lt;DiffInfo&gt; diffs=std::vector&lt;DiffInfo&gt;());
<a name="l00549"></a>00549 };
<a name="l00550"></a>00550                                                                         <span class="comment">/*}}}*/</span>
<a name="l00558"></a><a class="code" href="classpkgAcqIndex.html">00558</a> <span class="keyword">class </span><a class="code" href="classpkgAcqIndex.html" title="An acquire item that is responsible for fetching an index {{{ file (e.g., Packages or Sources)...">pkgAcqIndex</a> : <span class="keyword">public</span> <a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a>::<a class="code" href="classpkgAcquire_1_1Item.html#ab67e36773d41f42609709959446c9b9b" title="Initialize an item.">Item</a>
<a name="l00559"></a>00559 {
<a name="l00560"></a>00560    <span class="keyword">protected</span>:
<a name="l00561"></a>00561 
<a name="l00563"></a><a class="code" href="classpkgAcqIndex.html#a212e3b6696ed4ea25b97e072328eb8c0">00563</a>    <span class="keywordtype">bool</span> <a class="code" href="classpkgAcqIndex.html#a212e3b6696ed4ea25b97e072328eb8c0" title="If true, the index file has been decompressed.">Decompression</a>;
<a name="l00564"></a>00564 
<a name="l00568"></a><a class="code" href="classpkgAcqIndex.html#a27e614975e8443d2981e38f2a2ab2579">00568</a>    <span class="keywordtype">bool</span> <a class="code" href="classpkgAcqIndex.html#a27e614975e8443d2981e38f2a2ab2579" title="If true, the partially downloaded file will be removed when the download completes.">Erase</a>;
<a name="l00569"></a>00569 
<a name="l00575"></a>00575    <span class="comment">// FIXME: instead of a bool it should use a verify string that will</span>
<a name="l00576"></a>00576    <span class="comment">//        then be used in the pkgAcqIndex::Done method to ensure that</span>
<a name="l00577"></a>00577    <span class="comment">//        the downloaded file contains the expected tag</span>
<a name="l00578"></a><a class="code" href="classpkgAcqIndex.html#a578d4bd62ca537328d2418ffcfc66dfc">00578</a>    <span class="keywordtype">bool</span> <a class="code" href="classpkgAcqIndex.html#a578d4bd62ca537328d2418ffcfc66dfc" title="Verify for correctness by checking if a &quot;Package&quot; tag is found in the index. This can be set to false...">Verify</a>;
<a name="l00579"></a>00579 
<a name="l00583"></a><a class="code" href="classpkgAcqIndex.html#a63a8c90526aa28ea8a9c2458a53846bc">00583</a>    <a class="code" href="structpkgAcquire_1_1ItemDesc.html" title="Represents a single download source from which an item should be downloaded.">pkgAcquire::ItemDesc</a> <a class="code" href="classpkgAcqIndex.html#a63a8c90526aa28ea8a9c2458a53846bc" title="The download request that is currently being processed.">Desc</a>;
<a name="l00584"></a>00584 
<a name="l00588"></a><a class="code" href="classpkgAcqIndex.html#a60820e30470dce6f22aa8ced3fd96628">00588</a>    std::string <a class="code" href="classpkgAcqIndex.html#a60820e30470dce6f22aa8ced3fd96628" title="The object that is actually being fetched (minus any compression-related extensions).">RealURI</a>;
<a name="l00589"></a>00589 
<a name="l00591"></a><a class="code" href="classpkgAcqIndex.html#a30ce4163915317207b0c3ce437725e07">00591</a>    <a class="code" href="classHashString.html">HashString</a> <a class="code" href="classpkgAcqIndex.html#a30ce4163915317207b0c3ce437725e07" title="The expected hashsum of the decompressed index file.">ExpectedHash</a>;
<a name="l00592"></a>00592 
<a name="l00596"></a><a class="code" href="classpkgAcqIndex.html#adb278b963b475d9d4dfa3fe2952538de">00596</a>    std::string <a class="code" href="classpkgAcqIndex.html#adb278b963b475d9d4dfa3fe2952538de" title="The compression-related file extensions that are being added to the downloaded file one by one if fir...">CompressionExtension</a>;
<a name="l00597"></a>00597 
<a name="l00598"></a>00598    <span class="keyword">public</span>:
<a name="l00599"></a>00599    
<a name="l00600"></a>00600    <span class="comment">// Specialized action members</span>
<a name="l00601"></a>00601    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqIndex.html#ad7c33b8520f000b8dfdf48431ddf2949" title="Invoked by the acquire worker when the object couldn&#39;t be fetched.">Failed</a>(std::string Message,<a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00602"></a>00602    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqIndex.html#aa3ae904a406da88bc67dd2e9e556dffa" title="Invoked by the acquire worker when the object was fetched successfully.">Done</a>(std::string Message,<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> Size,std::string Md5Hash,
<a name="l00603"></a>00603                      <a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00604"></a>00604    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqIndex.html#a00fc58f7709000dd60501e4d9034b7b0" title="Custom headers to be sent to the fetch process.">Custom600Headers</a>();
<a name="l00605"></a><a class="code" href="classpkgAcqIndex.html#a853c32904fff75b1a5d2c68441f41cad">00605</a>    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqIndex.html#a853c32904fff75b1a5d2c68441f41cad" title="A &quot;descriptive&quot; URI-like string.">DescURI</a>() {<span class="keywordflow">return</span> <a class="code" href="classpkgAcqIndex.html#a63a8c90526aa28ea8a9c2458a53846bc" title="The download request that is currently being processed.">Desc</a>.<a class="code" href="structpkgAcquire_1_1ItemDesc.html#aaf8eea5037c53d12d3f31ab9e032712c" title="The URI from which to download this item.">URI</a>;};
<a name="l00606"></a><a class="code" href="classpkgAcqIndex.html#a3547c3b8f6427183a8720ef931e5510d">00606</a>    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqIndex.html#a3547c3b8f6427183a8720ef931e5510d" title="HashSum.">HashSum</a>() {<span class="keywordflow">return</span> <a class="code" href="classpkgAcqIndex.html#a30ce4163915317207b0c3ce437725e07" title="The expected hashsum of the decompressed index file.">ExpectedHash</a>.toStr(); };
<a name="l00607"></a>00607 
<a name="l00627"></a>00627    <a class="code" href="classpkgAcqIndex.html#a0526a68b8a5a3a9493c70c9f705aac15" title="Create a pkgAcqIndex.">pkgAcqIndex</a>(<a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a> *<a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>,std::string <a class="code" href="classURI.html">URI</a>,std::string URIDesc,
<a name="l00628"></a>00628                std::string <a class="code" href="classpkgAcquire_1_1Item.html#a0fc996230e235126c070608a0e170fe5" title="Short item description.">ShortDesc</a>, <a class="code" href="classHashString.html">HashString</a> <a class="code" href="classpkgAcqIndex.html#a30ce4163915317207b0c3ce437725e07" title="The expected hashsum of the decompressed index file.">ExpectedHash</a>, 
<a name="l00629"></a>00629                std::string compressExt=<span class="stringliteral">&quot;&quot;</span>);
<a name="l00630"></a>00630    <a class="code" href="classpkgAcqIndex.html#a0526a68b8a5a3a9493c70c9f705aac15" title="Create a pkgAcqIndex.">pkgAcqIndex</a>(<a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a> *<a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>, <span class="keyword">struct</span> <a class="code" href="classIndexTarget.html" title="Information about an index file.">IndexTarget</a> <span class="keyword">const</span> * <span class="keyword">const</span> Target,
<a name="l00631"></a>00631                          <a class="code" href="classHashString.html">HashString</a> <span class="keyword">const</span> &amp;<a class="code" href="classpkgAcqIndex.html#a30ce4163915317207b0c3ce437725e07" title="The expected hashsum of the decompressed index file.">ExpectedHash</a>, <a class="code" href="classindexRecords.html">indexRecords</a> <span class="keyword">const</span> *MetaIndexParser);
<a name="l00632"></a>00632    <span class="keywordtype">void</span> Init(std::string <span class="keyword">const</span> &amp;<a class="code" href="classURI.html">URI</a>, std::string <span class="keyword">const</span> &amp;URIDesc, std::string <span class="keyword">const</span> &amp;<a class="code" href="classpkgAcquire_1_1Item.html#a0fc996230e235126c070608a0e170fe5" title="Short item description.">ShortDesc</a>);
<a name="l00633"></a>00633 };
<a name="l00634"></a>00634                                                                         <span class="comment">/*}}}*/</span>
<a name="l00642"></a><a class="code" href="classpkgAcqIndexTrans.html">00642</a> <span class="keyword">class </span><a class="code" href="classpkgAcqIndexTrans.html" title="An acquire item that is responsible for fetching a {{{ translated index file.">pkgAcqIndexTrans</a> : <span class="keyword">public</span> <a class="code" href="classpkgAcqIndex.html" title="An acquire item that is responsible for fetching an index {{{ file (e.g., Packages or Sources)...">pkgAcqIndex</a>
<a name="l00643"></a>00643 {
<a name="l00644"></a>00644    <span class="keyword">public</span>:
<a name="l00645"></a>00645   
<a name="l00646"></a>00646    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqIndexTrans.html#ad7c33b8520f000b8dfdf48431ddf2949" title="Invoked by the acquire worker when the object couldn&#39;t be fetched.">Failed</a>(std::string Message,<a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00647"></a>00647    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqIndexTrans.html#a00fc58f7709000dd60501e4d9034b7b0" title="Custom headers to be sent to the fetch process.">Custom600Headers</a>();
<a name="l00648"></a>00648 
<a name="l00660"></a>00660    <a class="code" href="classpkgAcqIndexTrans.html#a09c9092ba33c90c9e34f94907237b866" title="Create a pkgAcqIndexTrans.">pkgAcqIndexTrans</a>(<a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a> *<a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>,std::string <a class="code" href="classURI.html">URI</a>,std::string URIDesc,
<a name="l00661"></a>00661                     std::string <a class="code" href="classpkgAcquire_1_1Item.html#a0fc996230e235126c070608a0e170fe5" title="Short item description.">ShortDesc</a>);
<a name="l00662"></a>00662    <a class="code" href="classpkgAcqIndexTrans.html#a09c9092ba33c90c9e34f94907237b866" title="Create a pkgAcqIndexTrans.">pkgAcqIndexTrans</a>(<a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a> *Owner, <span class="keyword">struct</span> <a class="code" href="classIndexTarget.html" title="Information about an index file.">IndexTarget</a> <span class="keyword">const</span> * <span class="keyword">const</span> Target,
<a name="l00663"></a>00663                     <a class="code" href="classHashString.html">HashString</a> <span class="keyword">const</span> &amp;<a class="code" href="classpkgAcqIndex.html#a30ce4163915317207b0c3ce437725e07" title="The expected hashsum of the decompressed index file.">ExpectedHash</a>, <a class="code" href="classindexRecords.html">indexRecords</a> <span class="keyword">const</span> *MetaIndexParser);
<a name="l00664"></a>00664 };
<a name="l00665"></a>00665                                                                         <span class="comment">/*}}}*/</span>                         <span class="comment">/*{{{*/</span>
<a name="l00667"></a><a class="code" href="classIndexTarget.html">00667</a> <span class="keyword">class </span><a class="code" href="classIndexTarget.html" title="Information about an index file.">IndexTarget</a>
<a name="l00668"></a>00668 {
<a name="l00669"></a>00669  <span class="keyword">public</span>:
<a name="l00671"></a><a class="code" href="classIndexTarget.html#aaf8eea5037c53d12d3f31ab9e032712c">00671</a>    std::string <a class="code" href="classIndexTarget.html#aaf8eea5037c53d12d3f31ab9e032712c" title="A URI from which the index file can be downloaded.">URI</a>;
<a name="l00672"></a>00672 
<a name="l00674"></a><a class="code" href="classIndexTarget.html#a72a1a381861908396ddca53a1fa28f97">00674</a>    std::string <a class="code" href="classIndexTarget.html#a72a1a381861908396ddca53a1fa28f97" title="A description of the index file.">Description</a>;
<a name="l00675"></a>00675 
<a name="l00677"></a><a class="code" href="classIndexTarget.html#a9248dc77e748314774ae2c9b1618e6a9">00677</a>    std::string <a class="code" href="classIndexTarget.html#a9248dc77e748314774ae2c9b1618e6a9" title="A shorter description of the index file.">ShortDesc</a>;
<a name="l00678"></a>00678 
<a name="l00682"></a><a class="code" href="classIndexTarget.html#ac440ac0ee12cd359222c7fed14141811">00682</a>    std::string <a class="code" href="classIndexTarget.html#ac440ac0ee12cd359222c7fed14141811" title="The key by which this index file should be looked up within the meta signature file.">MetaKey</a>;
<a name="l00683"></a>00683 
<a name="l00684"></a>00684    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> IsOptional()<span class="keyword"> const </span>{
<a name="l00685"></a>00685       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00686"></a>00686    }
<a name="l00687"></a>00687    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> IsSubIndex()<span class="keyword"> const </span>{
<a name="l00688"></a>00688       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00689"></a>00689    }
<a name="l00690"></a>00690 };
<a name="l00691"></a>00691                                                                         <span class="comment">/*}}}*/</span>                 <span class="comment">/*{{{*/</span>
<a name="l00693"></a><a class="code" href="classOptionalIndexTarget.html">00693</a> <span class="keyword">class </span><a class="code" href="classOptionalIndexTarget.html" title="Information about an optional index file.">OptionalIndexTarget</a> : <span class="keyword">public</span> <a class="code" href="classIndexTarget.html" title="Information about an index file.">IndexTarget</a>
<a name="l00694"></a>00694 {
<a name="l00695"></a>00695    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> IsOptional()<span class="keyword"> const </span>{
<a name="l00696"></a>00696       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00697"></a>00697    }
<a name="l00698"></a>00698 };
<a name="l00699"></a>00699                                                                         <span class="comment">/*}}}*/</span>                 <span class="comment">/*{{{*/</span>
<a name="l00701"></a><a class="code" href="classSubIndexTarget.html">00701</a> <span class="keyword">class </span><a class="code" href="classSubIndexTarget.html" title="Information about an subindex index file.">SubIndexTarget</a> : <span class="keyword">public</span> <a class="code" href="classIndexTarget.html" title="Information about an index file.">IndexTarget</a>
<a name="l00702"></a>00702 {
<a name="l00703"></a>00703    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> IsSubIndex()<span class="keyword"> const </span>{
<a name="l00704"></a>00704       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00705"></a>00705    }
<a name="l00706"></a>00706 };
<a name="l00707"></a>00707                                                                         <span class="comment">/*}}}*/</span>                 <span class="comment">/*{{{*/</span>
<a name="l00709"></a><a class="code" href="classOptionalSubIndexTarget.html">00709</a> <span class="keyword">class </span><a class="code" href="classOptionalSubIndexTarget.html" title="Information about an subindex index file.">OptionalSubIndexTarget</a> : <span class="keyword">public</span> <a class="code" href="classOptionalIndexTarget.html" title="Information about an optional index file.">OptionalIndexTarget</a>
<a name="l00710"></a>00710 {
<a name="l00711"></a>00711    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> IsSubIndex()<span class="keyword"> const </span>{
<a name="l00712"></a>00712       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00713"></a>00713    }
<a name="l00714"></a>00714 };
<a name="l00715"></a>00715                                                                         <span class="comment">/*}}}*/</span>
<a name="l00716"></a>00716 
<a name="l00725"></a><a class="code" href="classpkgAcqMetaSig.html">00725</a> <span class="keyword">class </span><a class="code" href="classpkgAcqMetaSig.html" title="An acquire item that downloads the detached signature {{{ of a meta-index (Release) file...">pkgAcqMetaSig</a> : <span class="keyword">public</span> <a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a>::<a class="code" href="classpkgAcquire_1_1Item.html#ab67e36773d41f42609709959446c9b9b" title="Initialize an item.">Item</a>
<a name="l00726"></a>00726 {
<a name="l00727"></a>00727    <span class="keyword">protected</span>:
<a name="l00729"></a><a class="code" href="classpkgAcqMetaSig.html#a2f4fff156ddc124341856f6cdd27e7da">00729</a>    std::string <a class="code" href="classpkgAcqMetaSig.html#a2f4fff156ddc124341856f6cdd27e7da" title="The last good signature file.">LastGoodSig</a>;
<a name="l00730"></a>00730 
<a name="l00732"></a><a class="code" href="classpkgAcqMetaSig.html#a63a8c90526aa28ea8a9c2458a53846bc">00732</a>    <a class="code" href="structpkgAcquire_1_1ItemDesc.html" title="Represents a single download source from which an item should be downloaded.">pkgAcquire::ItemDesc</a> <a class="code" href="classpkgAcqMetaSig.html#a63a8c90526aa28ea8a9c2458a53846bc" title="The fetch request that is currently being processed.">Desc</a>;
<a name="l00733"></a>00733 
<a name="l00738"></a><a class="code" href="classpkgAcqMetaSig.html#a60820e30470dce6f22aa8ced3fd96628">00738</a>    std::string <a class="code" href="classpkgAcqMetaSig.html#a60820e30470dce6f22aa8ced3fd96628" title="The URI of the signature file. Unlike Desc.URI, this is never modified; it is used to determine the f...">RealURI</a>;
<a name="l00739"></a>00739 
<a name="l00741"></a><a class="code" href="classpkgAcqMetaSig.html#a6d41f04d9189c14ba8b5d50e0489e330">00741</a>    std::string <a class="code" href="classpkgAcqMetaSig.html#a6d41f04d9189c14ba8b5d50e0489e330" title="The URI of the meta-index file to be fetched after the signature.">MetaIndexURI</a>;
<a name="l00742"></a>00742 
<a name="l00746"></a><a class="code" href="classpkgAcqMetaSig.html#af0d55de6e3b0d3a0b7eedf2cd628d7ad">00746</a>    std::string <a class="code" href="classpkgAcqMetaSig.html#af0d55de6e3b0d3a0b7eedf2cd628d7ad" title="A &quot;URI-style&quot; description of the meta-index file to be fetched after the signature.">MetaIndexURIDesc</a>;
<a name="l00747"></a>00747 
<a name="l00751"></a><a class="code" href="classpkgAcqMetaSig.html#a46f2c5544ef957236d00f041243a631a">00751</a>    std::string <a class="code" href="classpkgAcqMetaSig.html#a46f2c5544ef957236d00f041243a631a" title="A brief description of the meta-index file to be fetched after the signature.">MetaIndexShortDesc</a>;
<a name="l00752"></a>00752 
<a name="l00754"></a><a class="code" href="classpkgAcqMetaSig.html#ae85ea3739b9be18225e6e0f56b71d50b">00754</a>    <a class="code" href="classindexRecords.html">indexRecords</a>* <a class="code" href="classpkgAcqMetaSig.html#ae85ea3739b9be18225e6e0f56b71d50b" title="A package-system-specific parser for the meta-index file.">MetaIndexParser</a>;
<a name="l00755"></a>00755 
<a name="l00761"></a><a class="code" href="classpkgAcqMetaSig.html#ae7334ddd48c9dc42da62f2c1d833c3fb">00761</a>    <span class="keyword">const</span> std::vector&lt;struct IndexTarget*&gt;* <a class="code" href="classpkgAcqMetaSig.html#ae7334ddd48c9dc42da62f2c1d833c3fb" title="The index files which should be looked up in the meta-index and then downloaded.">IndexTargets</a>;
<a name="l00762"></a>00762 
<a name="l00763"></a>00763    <span class="keyword">public</span>:
<a name="l00764"></a>00764    
<a name="l00765"></a>00765    <span class="comment">// Specialized action members</span>
<a name="l00766"></a>00766    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqMetaSig.html#ad7c33b8520f000b8dfdf48431ddf2949" title="Invoked by the acquire worker when the object couldn&#39;t be fetched.">Failed</a>(std::string Message,<a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00767"></a>00767    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqMetaSig.html#aa3ae904a406da88bc67dd2e9e556dffa" title="Invoked by the acquire worker when the object was fetched successfully.">Done</a>(std::string Message,<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> Size,std::string Md5Hash,
<a name="l00768"></a>00768                      <a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00769"></a>00769    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqMetaSig.html#a00fc58f7709000dd60501e4d9034b7b0" title="Custom headers to be sent to the fetch process.">Custom600Headers</a>();
<a name="l00770"></a><a class="code" href="classpkgAcqMetaSig.html#a853c32904fff75b1a5d2c68441f41cad">00770</a>    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqMetaSig.html#a853c32904fff75b1a5d2c68441f41cad" title="A &quot;descriptive&quot; URI-like string.">DescURI</a>() {<span class="keywordflow">return</span> <a class="code" href="classpkgAcqMetaSig.html#a60820e30470dce6f22aa8ced3fd96628" title="The URI of the signature file. Unlike Desc.URI, this is never modified; it is used to determine the f...">RealURI</a>; };
<a name="l00771"></a>00771 
<a name="l00773"></a>00773    <a class="code" href="classpkgAcqMetaSig.html#ab9d202d1f9da1a34d749b2c7a5f801fa" title="Create a new pkgAcqMetaSig.">pkgAcqMetaSig</a>(<a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a> *<a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>,std::string <a class="code" href="classURI.html">URI</a>,std::string URIDesc, std::string <a class="code" href="classpkgAcquire_1_1Item.html#a0fc996230e235126c070608a0e170fe5" title="Short item description.">ShortDesc</a>,
<a name="l00774"></a>00774                  std::string <a class="code" href="classpkgAcqMetaSig.html#a6d41f04d9189c14ba8b5d50e0489e330" title="The URI of the meta-index file to be fetched after the signature.">MetaIndexURI</a>, std::string <a class="code" href="classpkgAcqMetaSig.html#af0d55de6e3b0d3a0b7eedf2cd628d7ad" title="A &quot;URI-style&quot; description of the meta-index file to be fetched after the signature.">MetaIndexURIDesc</a>, std::string <a class="code" href="classpkgAcqMetaSig.html#a46f2c5544ef957236d00f041243a631a" title="A brief description of the meta-index file to be fetched after the signature.">MetaIndexShortDesc</a>,
<a name="l00775"></a>00775                  <span class="keyword">const</span> std::vector&lt;struct IndexTarget*&gt;* <a class="code" href="classpkgAcqMetaSig.html#ae7334ddd48c9dc42da62f2c1d833c3fb" title="The index files which should be looked up in the meta-index and then downloaded.">IndexTargets</a>,
<a name="l00776"></a>00776                  <a class="code" href="classindexRecords.html">indexRecords</a>* <a class="code" href="classpkgAcqMetaSig.html#ae85ea3739b9be18225e6e0f56b71d50b" title="A package-system-specific parser for the meta-index file.">MetaIndexParser</a>);
<a name="l00777"></a>00777 };
<a name="l00778"></a>00778                                                                         <span class="comment">/*}}}*/</span>
<a name="l00789"></a><a class="code" href="classpkgAcqMetaIndex.html">00789</a> <span class="keyword">class </span><a class="code" href="classpkgAcqMetaIndex.html" title="An item that is responsible for downloading the meta-index {{{ file (i.e., Release) itself and verify...">pkgAcqMetaIndex</a> : <span class="keyword">public</span> <a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a>::<a class="code" href="classpkgAcquire_1_1Item.html#ab67e36773d41f42609709959446c9b9b" title="Initialize an item.">Item</a>
<a name="l00790"></a>00790 {
<a name="l00791"></a>00791    <span class="keyword">protected</span>:
<a name="l00793"></a><a class="code" href="classpkgAcqMetaIndex.html#a63a8c90526aa28ea8a9c2458a53846bc">00793</a>    <a class="code" href="structpkgAcquire_1_1ItemDesc.html" title="Represents a single download source from which an item should be downloaded.">pkgAcquire::ItemDesc</a> <a class="code" href="classpkgAcqMetaIndex.html#a63a8c90526aa28ea8a9c2458a53846bc" title="The fetch command that is currently being processed.">Desc</a>;
<a name="l00794"></a>00794 
<a name="l00798"></a><a class="code" href="classpkgAcqMetaIndex.html#a60820e30470dce6f22aa8ced3fd96628">00798</a>    std::string <a class="code" href="classpkgAcqMetaIndex.html#a60820e30470dce6f22aa8ced3fd96628" title="The URI that is actually being downloaded; never modified by pkgAcqMetaIndex.">RealURI</a>;
<a name="l00799"></a>00799 
<a name="l00805"></a><a class="code" href="classpkgAcqMetaIndex.html#aeb332f63be8cadaca2f22ab8cdc9a938">00805</a>    std::string <a class="code" href="classpkgAcqMetaIndex.html#aeb332f63be8cadaca2f22ab8cdc9a938" title="The file in which the signature for this index was stored.">SigFile</a>;
<a name="l00806"></a>00806 
<a name="l00808"></a><a class="code" href="classpkgAcqMetaIndex.html#ae7334ddd48c9dc42da62f2c1d833c3fb">00808</a>    <span class="keyword">const</span> std::vector&lt;struct IndexTarget*&gt;* <a class="code" href="classpkgAcqMetaIndex.html#ae7334ddd48c9dc42da62f2c1d833c3fb" title="The index files to download.">IndexTargets</a>;
<a name="l00809"></a>00809 
<a name="l00811"></a><a class="code" href="classpkgAcqMetaIndex.html#ae85ea3739b9be18225e6e0f56b71d50b">00811</a>    <a class="code" href="classindexRecords.html">indexRecords</a>* <a class="code" href="classpkgAcqMetaIndex.html#ae85ea3739b9be18225e6e0f56b71d50b" title="The parser for the meta-index file.">MetaIndexParser</a>;
<a name="l00812"></a>00812 
<a name="l00815"></a><a class="code" href="classpkgAcqMetaIndex.html#a443405c4d5dd2d2473f185ee7d6a838b">00815</a>    <span class="keywordtype">bool</span> <a class="code" href="classpkgAcqMetaIndex.html#a443405c4d5dd2d2473f185ee7d6a838b" title="If true, the index&#39;s signature is currently being verified.">AuthPass</a>;
<a name="l00816"></a>00816    <span class="comment">// required to deal gracefully with problems caused by incorrect ims hits</span>
<a name="l00817"></a>00817    <span class="keywordtype">bool</span> IMSHit; 
<a name="l00818"></a>00818 
<a name="l00824"></a>00824    <span class="keywordtype">bool</span> <a class="code" href="classpkgAcqMetaIndex.html#ab15f52aa17be38260f7247cf43991de3" title="Check that the release file is a release file for the correct distribution.">VerifyVendor</a>(std::string Message);
<a name="l00825"></a>00825 
<a name="l00835"></a>00835    <span class="keywordtype">void</span> <a class="code" href="classpkgAcqMetaIndex.html#a0b806d6a9c2ae24912345a631a4ffc57" title="Called when a file is finished being retrieved.">RetrievalDone</a>(std::string Message);
<a name="l00836"></a>00836 
<a name="l00846"></a>00846    <span class="keywordtype">void</span> <a class="code" href="classpkgAcqMetaIndex.html#ae5a8b94d40f7894e3d49379fea419909" title="Called when authentication succeeded.">AuthDone</a>(std::string Message);
<a name="l00847"></a>00847 
<a name="l00856"></a>00856    <span class="keywordtype">void</span> <a class="code" href="classpkgAcqMetaIndex.html#ac040add5e06f223c1cf7dfc5e38efe4f" title="Starts downloading the individual index files.">QueueIndexes</a>(<span class="keywordtype">bool</span> verify);
<a name="l00857"></a>00857    
<a name="l00858"></a>00858    <span class="keyword">public</span>:
<a name="l00859"></a>00859    
<a name="l00860"></a>00860    <span class="comment">// Specialized action members</span>
<a name="l00861"></a>00861    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqMetaIndex.html#ad7c33b8520f000b8dfdf48431ddf2949" title="Invoked by the acquire worker when the object couldn&#39;t be fetched.">Failed</a>(std::string Message,<a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00862"></a>00862    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqMetaIndex.html#a688635545a65b9a4bebed86627574d41" title="Invoked by the acquire worker when the object was fetched successfully.">Done</a>(std::string Message,<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> Size, std::string Hash,
<a name="l00863"></a>00863                      <a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00864"></a>00864    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqMetaIndex.html#a00fc58f7709000dd60501e4d9034b7b0" title="Custom headers to be sent to the fetch process.">Custom600Headers</a>();
<a name="l00865"></a><a class="code" href="classpkgAcqMetaIndex.html#a853c32904fff75b1a5d2c68441f41cad">00865</a>    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqMetaIndex.html#a853c32904fff75b1a5d2c68441f41cad" title="A &quot;descriptive&quot; URI-like string.">DescURI</a>() {<span class="keywordflow">return</span> <a class="code" href="classpkgAcqMetaIndex.html#a60820e30470dce6f22aa8ced3fd96628" title="The URI that is actually being downloaded; never modified by pkgAcqMetaIndex.">RealURI</a>; };
<a name="l00866"></a>00866 
<a name="l00868"></a>00868    <a class="code" href="classpkgAcqMetaIndex.html#ae7643417a3ec7af99c8a878615cd8fcd" title="Create a new pkgAcqMetaIndex.">pkgAcqMetaIndex</a>(<a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a> *<a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>,
<a name="l00869"></a>00869                    std::string <a class="code" href="classURI.html">URI</a>,std::string URIDesc, std::string <a class="code" href="classpkgAcquire_1_1Item.html#a0fc996230e235126c070608a0e170fe5" title="Short item description.">ShortDesc</a>,
<a name="l00870"></a>00870                    std::string <a class="code" href="classpkgAcqMetaIndex.html#aeb332f63be8cadaca2f22ab8cdc9a938" title="The file in which the signature for this index was stored.">SigFile</a>,
<a name="l00871"></a>00871                    <span class="keyword">const</span> std::vector&lt;struct IndexTarget*&gt;* <a class="code" href="classpkgAcqMetaIndex.html#ae7334ddd48c9dc42da62f2c1d833c3fb" title="The index files to download.">IndexTargets</a>,
<a name="l00872"></a>00872                    <a class="code" href="classindexRecords.html">indexRecords</a>* <a class="code" href="classpkgAcqMetaIndex.html#ae85ea3739b9be18225e6e0f56b71d50b" title="The parser for the meta-index file.">MetaIndexParser</a>);
<a name="l00873"></a>00873 };
<a name="l00874"></a>00874                                                                         <span class="comment">/*}}}*/</span>
<a name="l00876"></a><a class="code" href="classpkgAcqMetaClearSig.html">00876</a> <span class="keyword">class </span><a class="code" href="classpkgAcqMetaClearSig.html" title="An item repsonsible for downloading clearsigned metaindexes {{{.">pkgAcqMetaClearSig</a> : <span class="keyword">public</span> <a class="code" href="classpkgAcqMetaIndex.html" title="An item that is responsible for downloading the meta-index {{{ file (i.e., Release) itself and verify...">pkgAcqMetaIndex</a>
<a name="l00877"></a>00877 {
<a name="l00879"></a>00879    std::string MetaIndexURI;
<a name="l00880"></a>00880 
<a name="l00882"></a>00882    std::string MetaIndexURIDesc;
<a name="l00883"></a>00883 
<a name="l00885"></a>00885    std::string MetaIndexShortDesc;
<a name="l00886"></a>00886 
<a name="l00888"></a>00888    std::string MetaSigURI;
<a name="l00889"></a>00889 
<a name="l00891"></a>00891    std::string MetaSigURIDesc;
<a name="l00892"></a>00892 
<a name="l00894"></a>00894    std::string MetaSigShortDesc;
<a name="l00895"></a>00895 
<a name="l00896"></a>00896 <span class="keyword">public</span>:
<a name="l00897"></a>00897    <span class="keywordtype">void</span> <a class="code" href="classpkgAcqMetaClearSig.html#ad7c33b8520f000b8dfdf48431ddf2949" title="Invoked by the acquire worker when the object couldn&#39;t be fetched.">Failed</a>(std::string Message,<a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00898"></a>00898    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqMetaClearSig.html#a00fc58f7709000dd60501e4d9034b7b0" title="Custom headers to be sent to the fetch process.">Custom600Headers</a>();
<a name="l00899"></a>00899 
<a name="l00901"></a>00901    <a class="code" href="classpkgAcqMetaClearSig.html#a733baf56f8fb85c989388681f309a15f" title="Create a new pkgAcqMetaClearSig.">pkgAcqMetaClearSig</a>(<a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a> *<a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>,
<a name="l00902"></a>00902                 std::string <span class="keyword">const</span> &amp;<a class="code" href="classURI.html">URI</a>, std::string <span class="keyword">const</span> &amp;URIDesc, std::string <span class="keyword">const</span> &amp;<a class="code" href="classpkgAcquire_1_1Item.html#a0fc996230e235126c070608a0e170fe5" title="Short item description.">ShortDesc</a>,
<a name="l00903"></a>00903                 std::string <span class="keyword">const</span> &amp;MetaIndexURI, std::string <span class="keyword">const</span> &amp;MetaIndexURIDesc, std::string <span class="keyword">const</span> &amp;MetaIndexShortDesc,
<a name="l00904"></a>00904                 std::string <span class="keyword">const</span> &amp;MetaSigURI, std::string <span class="keyword">const</span> &amp;MetaSigURIDesc, std::string <span class="keyword">const</span> &amp;MetaSigShortDesc,
<a name="l00905"></a>00905                 <span class="keyword">const</span> std::vector&lt;struct IndexTarget*&gt;* <a class="code" href="classpkgAcqMetaIndex.html#ae7334ddd48c9dc42da62f2c1d833c3fb" title="The index files to download.">IndexTargets</a>,
<a name="l00906"></a>00906                 <a class="code" href="classindexRecords.html">indexRecords</a>* <a class="code" href="classpkgAcqMetaIndex.html#ae85ea3739b9be18225e6e0f56b71d50b" title="The parser for the meta-index file.">MetaIndexParser</a>);
<a name="l00907"></a>00907 };
<a name="l00908"></a>00908                                                                         <span class="comment">/*}}}*/</span>
<a name="l00914"></a><a class="code" href="classpkgAcqArchive.html">00914</a> <span class="keyword">class </span><a class="code" href="classpkgAcqArchive.html" title="An item that is responsible for fetching a package file. {{{.">pkgAcqArchive</a> : <span class="keyword">public</span> <a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a>::<a class="code" href="classpkgAcquire_1_1Item.html#ab67e36773d41f42609709959446c9b9b" title="Initialize an item.">Item</a>
<a name="l00915"></a>00915 {
<a name="l00916"></a>00916    <span class="keyword">protected</span>:
<a name="l00918"></a><a class="code" href="classpkgAcqArchive.html#a0975e7488587b7ba9f8a7a92d2c7ef58">00918</a>    <a class="code" href="classpkgCache_1_1VerIterator.html">pkgCache::VerIterator</a> <a class="code" href="classpkgAcqArchive.html#a0975e7488587b7ba9f8a7a92d2c7ef58" title="The package version being fetched.">Version</a>;
<a name="l00919"></a>00919 
<a name="l00921"></a><a class="code" href="classpkgAcqArchive.html#a63a8c90526aa28ea8a9c2458a53846bc">00921</a>    <a class="code" href="structpkgAcquire_1_1ItemDesc.html" title="Represents a single download source from which an item should be downloaded.">pkgAcquire::ItemDesc</a> <a class="code" href="classpkgAcqArchive.html#a63a8c90526aa28ea8a9c2458a53846bc" title="The fetch command that is currently being processed.">Desc</a>;
<a name="l00922"></a>00922 
<a name="l00926"></a><a class="code" href="classpkgAcqArchive.html#ae1a860799a1e38f21c90468010b59106">00926</a>    <a class="code" href="classpkgSourceList.html">pkgSourceList</a> *<a class="code" href="classpkgAcqArchive.html#ae1a860799a1e38f21c90468010b59106" title="The list of sources from which to pick archives to download this package from.">Sources</a>;
<a name="l00927"></a>00927 
<a name="l00931"></a><a class="code" href="classpkgAcqArchive.html#a048ee963fb5e948ec3599f22f6ad53ec">00931</a>    <a class="code" href="classpkgRecords.html">pkgRecords</a> *<a class="code" href="classpkgAcqArchive.html#a048ee963fb5e948ec3599f22f6ad53ec" title="A package records object, used to look up the file corresponding to each version of the package...">Recs</a>;
<a name="l00932"></a>00932 
<a name="l00934"></a><a class="code" href="classpkgAcqArchive.html#a30ce4163915317207b0c3ce437725e07">00934</a>    <a class="code" href="classHashString.html">HashString</a> <a class="code" href="classpkgAcqArchive.html#a30ce4163915317207b0c3ce437725e07" title="The hashsum of this package.">ExpectedHash</a>;
<a name="l00935"></a>00935 
<a name="l00939"></a><a class="code" href="classpkgAcqArchive.html#a661aca9bffbae2b69b13c0d87e6150bc">00939</a>    std::string &amp;<a class="code" href="classpkgAcqArchive.html#a661aca9bffbae2b69b13c0d87e6150bc" title="A location in which the actual filename of the package should be stored.">StoreFilename</a>;
<a name="l00940"></a>00940 
<a name="l00942"></a><a class="code" href="classpkgAcqArchive.html#aea53b53fbf73ac1dc509503defe503df">00942</a>    <a class="code" href="classpkgCache_1_1VerFileIterator.html">pkgCache::VerFileIterator</a> <a class="code" href="classpkgAcqArchive.html#aea53b53fbf73ac1dc509503defe503df" title="The next file for this version to try to download.">Vf</a>;
<a name="l00943"></a>00943 
<a name="l00949"></a><a class="code" href="classpkgAcqArchive.html#a2cf4b8b42d2691df4d19f456bad87327">00949</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classpkgAcqArchive.html#a2cf4b8b42d2691df4d19f456bad87327" title="How many (more) times to try to find a new source from which to download this package version if it f...">Retries</a>;
<a name="l00950"></a>00950 
<a name="l00954"></a><a class="code" href="classpkgAcqArchive.html#a224b67941df4d54b46be8dd05390428f">00954</a>    <span class="keywordtype">bool</span> <a class="code" href="classpkgAcqArchive.html#a224b67941df4d54b46be8dd05390428f" title="true if this version file is being downloaded from a trusted source.">Trusted</a>; 
<a name="l00955"></a>00955 
<a name="l00957"></a>00957    <span class="keywordtype">bool</span> <a class="code" href="classpkgAcqArchive.html#aa5c5f022102151baa34078b5699aa717" title="Queue up the next available file for this version.">QueueNext</a>();
<a name="l00958"></a>00958    
<a name="l00959"></a>00959    <span class="keyword">public</span>:
<a name="l00960"></a>00960    
<a name="l00961"></a>00961    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqArchive.html#ad7c33b8520f000b8dfdf48431ddf2949" title="Invoked by the acquire worker when the object couldn&#39;t be fetched.">Failed</a>(std::string Message,<a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00962"></a>00962    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqArchive.html#a688635545a65b9a4bebed86627574d41" title="Invoked by the acquire worker when the object was fetched successfully.">Done</a>(std::string Message,<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> Size,std::string Hash,
<a name="l00963"></a>00963                      <a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l00964"></a><a class="code" href="classpkgAcqArchive.html#a853c32904fff75b1a5d2c68441f41cad">00964</a>    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqArchive.html#a853c32904fff75b1a5d2c68441f41cad" title="A &quot;descriptive&quot; URI-like string.">DescURI</a>() {<span class="keywordflow">return</span> <a class="code" href="classpkgAcqArchive.html#a63a8c90526aa28ea8a9c2458a53846bc" title="The fetch command that is currently being processed.">Desc</a>.<a class="code" href="structpkgAcquire_1_1ItemDesc.html#aaf8eea5037c53d12d3f31ab9e032712c" title="The URI from which to download this item.">URI</a>;};
<a name="l00965"></a><a class="code" href="classpkgAcqArchive.html#a0fc996230e235126c070608a0e170fe5">00965</a>    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqArchive.html#a0fc996230e235126c070608a0e170fe5" title="Short item description.">ShortDesc</a>() {<span class="keywordflow">return</span> <a class="code" href="classpkgAcqArchive.html#a63a8c90526aa28ea8a9c2458a53846bc" title="The fetch command that is currently being processed.">Desc</a>.<a class="code" href="structpkgAcquire_1_1ItemDesc.html#a9248dc77e748314774ae2c9b1618e6a9">ShortDesc</a>;};
<a name="l00966"></a>00966    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqArchive.html#a729cc359899015c4d42616a4af1d7944" title="Invoked by the worker when the download is completely done.">Finished</a>();
<a name="l00967"></a><a class="code" href="classpkgAcqArchive.html#a3547c3b8f6427183a8720ef931e5510d">00967</a>    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqArchive.html#a3547c3b8f6427183a8720ef931e5510d" title="HashSum.">HashSum</a>() {<span class="keywordflow">return</span> <a class="code" href="classpkgAcqArchive.html#a30ce4163915317207b0c3ce437725e07" title="The hashsum of this package.">ExpectedHash</a>.toStr(); };
<a name="l00968"></a>00968    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classpkgAcqArchive.html#a47df43e8b22e5a598039f068d8f6aff3">IsTrusted</a>();
<a name="l00969"></a>00969    
<a name="l00988"></a>00988    <a class="code" href="classpkgAcqArchive.html#a97892237c4d4b5f02a96313d30c3c9c1" title="Create a new pkgAcqArchive.">pkgAcqArchive</a>(<a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a> *<a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>,<a class="code" href="classpkgSourceList.html">pkgSourceList</a> *<a class="code" href="classpkgAcqArchive.html#ae1a860799a1e38f21c90468010b59106" title="The list of sources from which to pick archives to download this package from.">Sources</a>,
<a name="l00989"></a>00989                  <a class="code" href="classpkgRecords.html">pkgRecords</a> *<a class="code" href="classpkgAcqArchive.html#a048ee963fb5e948ec3599f22f6ad53ec" title="A package records object, used to look up the file corresponding to each version of the package...">Recs</a>,<a class="code" href="classpkgCache_1_1VerIterator.html">pkgCache::VerIterator</a> <span class="keyword">const</span> &amp;<a class="code" href="classpkgAcqArchive.html#a0975e7488587b7ba9f8a7a92d2c7ef58" title="The package version being fetched.">Version</a>,
<a name="l00990"></a>00990                  std::string &amp;<a class="code" href="classpkgAcqArchive.html#a661aca9bffbae2b69b13c0d87e6150bc" title="A location in which the actual filename of the package should be stored.">StoreFilename</a>);
<a name="l00991"></a>00991 };
<a name="l00992"></a>00992                                                                         <span class="comment">/*}}}*/</span>
<a name="l00999"></a><a class="code" href="classpkgAcqFile.html">00999</a> <span class="keyword">class </span><a class="code" href="classpkgAcqFile.html" title="Retrieve an arbitrary file to the current directory. {{{.">pkgAcqFile</a> : <span class="keyword">public</span> <a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a>::<a class="code" href="classpkgAcquire_1_1Item.html#ab67e36773d41f42609709959446c9b9b" title="Initialize an item.">Item</a>
<a name="l01000"></a>01000 {
<a name="l01002"></a>01002    <a class="code" href="structpkgAcquire_1_1ItemDesc.html" title="Represents a single download source from which an item should be downloaded.">pkgAcquire::ItemDesc</a> Desc;
<a name="l01003"></a>01003 
<a name="l01005"></a>01005    <a class="code" href="classHashString.html">HashString</a> ExpectedHash;
<a name="l01006"></a>01006 
<a name="l01010"></a>01010    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Retries;
<a name="l01011"></a>01011    
<a name="l01013"></a>01013    <span class="keywordtype">bool</span> IsIndexFile;
<a name="l01014"></a>01014 
<a name="l01015"></a>01015    <span class="keyword">public</span>:
<a name="l01016"></a>01016    
<a name="l01017"></a>01017    <span class="comment">// Specialized action members</span>
<a name="l01018"></a>01018    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqFile.html#ad7c33b8520f000b8dfdf48431ddf2949" title="Invoked by the acquire worker when the object couldn&#39;t be fetched.">Failed</a>(std::string Message,<a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l01019"></a>01019    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classpkgAcqFile.html#ac71dc7046004c78e0a799eb6484160e7" title="Invoked by the acquire worker when the object was fetched successfully.">Done</a>(std::string Message,<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> Size,std::string CalcHash,
<a name="l01020"></a>01020                      <a class="code" href="structpkgAcquire_1_1MethodConfig.html" title="Information about the properties of a single acquire method. {{{.">pkgAcquire::MethodConfig</a> *Cnf);
<a name="l01021"></a><a class="code" href="classpkgAcqFile.html#a853c32904fff75b1a5d2c68441f41cad">01021</a>    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqFile.html#a853c32904fff75b1a5d2c68441f41cad" title="A &quot;descriptive&quot; URI-like string.">DescURI</a>() {<span class="keywordflow">return</span> Desc.<a class="code" href="structpkgAcquire_1_1ItemDesc.html#aaf8eea5037c53d12d3f31ab9e032712c" title="The URI from which to download this item.">URI</a>;};
<a name="l01022"></a><a class="code" href="classpkgAcqFile.html#a3547c3b8f6427183a8720ef931e5510d">01022</a>    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqFile.html#a3547c3b8f6427183a8720ef931e5510d" title="HashSum.">HashSum</a>() {<span class="keywordflow">return</span> ExpectedHash.toStr(); };
<a name="l01023"></a>01023    <span class="keyword">virtual</span> std::string <a class="code" href="classpkgAcqFile.html#a00fc58f7709000dd60501e4d9034b7b0" title="Custom headers to be sent to the fetch process.">Custom600Headers</a>();
<a name="l01024"></a>01024 
<a name="l01056"></a>01056    <a class="code" href="classpkgAcqFile.html#aff17c7679226351732ddf579713885a5" title="Create a new pkgAcqFile object.">pkgAcqFile</a>(<a class="code" href="classpkgAcquire.html" title="The core download scheduler. {{{.">pkgAcquire</a> *<a class="code" href="classpkgAcquire_1_1Item.html#a76f8c48f1e7f5669a16a9d5e863edd10" title="The acquire object with which this item is associated.">Owner</a>, std::string <a class="code" href="classURI.html">URI</a>, std::string Hash, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> Size,
<a name="l01057"></a>01057               std::string Desc, std::string <a class="code" href="classpkgAcquire_1_1Item.html#a0fc996230e235126c070608a0e170fe5" title="Short item description.">ShortDesc</a>,
<a name="l01058"></a>01058               <span class="keyword">const</span> std::string &amp;DestDir=<span class="stringliteral">&quot;&quot;</span>, <span class="keyword">const</span> std::string &amp;DestFilename=<span class="stringliteral">&quot;&quot;</span>,
<a name="l01059"></a>01059               <span class="keywordtype">bool</span> IsIndexFile=<span class="keyword">false</span>);
<a name="l01060"></a>01060 };
<a name="l01061"></a>01061                                                                         <span class="comment">/*}}}*/</span>
<a name="l01064"></a>01064 <span class="preprocessor">#endif</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Wed Mar 26 2014 10:05:24 for apt by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
